<head>
    <title>ClowNCaSe conVErTer&nbsp;&nbsp;ðŸ¤¡</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ¤¡</text></svg>">
</head>

<h1>ðŸ¤¡ CLoWncAse coNVErTeR ðŸ¤¡</h1>
<p>iNpUt:</p>
<textarea id="ta_in"></textarea>
<p>
    <button id="button" style="width: 200px; height: 50px; position: center;">gEneRAte!</button>
</p>
<p>Output:</p>
<textarea disabled onclick="this.focus();this.select()" id="ta_out"></textarea>

<style>

    body {
        position: relative;
        max-width: 650px;
        margin: 0 auto;
        padding: 40px 10px;
        font: 18px/1.5 sans-serif;
        color: #444
    }

    h1, h2, h3 {
        line-height: 1.2
    }

    @media (prefers-color-scheme: dark) {
        body {
            color: #c9d1d9;
            background: #0d1117
            height: 100vh;
        }

        a:link {
            color: #58a6ff
        }

        a:visited {
            color: #8e96f0
        }
    }

    textarea {
        resize: none;
        height: 200px;
        width: 600px;
        font-size: 18px;
        font: 18px/1.5 sans-serif;
    }
</style>


<script>
    button.addEventListener('click', () => {

        var balance = 0 

        // probabilty of uppercase latter
        var probabilities = [1, 0.9, 0.5, 0.3, 0, 0, 0];
        var middle = Math.floor(probabilities.length / 2);

        ta_out.value = ta_in.value.split('').map(c => {
            var currentProbability = probabilities[middle + balance]
            if (Math.random() < currentProbability) {
                if (balance < 0) balance = 1;
                else balance++;
                return c.toUpperCase();
            } else {
                if (balance > 0) balance = -1;
                else balance--;
                return c.toLowerCase();
            }
        }).join('');
    });
</script>